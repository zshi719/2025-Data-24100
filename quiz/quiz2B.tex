\documentclass[11pt]{article}
\usepackage{fullpage, fancyhdr, ifthen, amssymb, amsfonts, amsmath, booktabs}
\usepackage{tabularx}
\usepackage{multicol}
\usepackage[margin=0.25in]{geometry}
\usepackage{forest}
\usepackage{ulem}
\usepackage{colortbl}
\pagestyle{empty}

\begin{document}

\begin{tabularx}{\textwidth}{X}
\textbf{Quiz 2B} \\
\hline
\end{tabularx}


\begin{table}[h]
\centering
\arrayrulecolor{black!10} % Very light table outline
\begin{tabular}{|p{\textwidth}|}
\hline
\begin{minipage}[t]{\textwidth}
\vspace{0pt}  % This is crucial for top alignment
\noindent \textbf{Instructions:} Please answer the following questions making sure to write your answers legibly. If you run out of room or need to re-write use the back of this quiz. The graphic denotes the file system on a machine and the Dockerfile in \texttt{/home/alice}.
\begin{itemize}
    \item \underline{Directories} are underlined. Any other object should be considered a file.
    \item \textbf{For each question assume that you are starting from the original file system}. Ignore any changes to the file system you made in previous questions.
    \item You will be graded for being unnecessarily complex in your solutions. 
    \item Any syntax not covered in class will be tested \emph{on my machine} for applicability.
    \item \textbf{Do not assume a ``home" directory location.}
\end{itemize}


\end{minipage} \\
\hline
\begin{tabular}{p{0.3\textwidth}|p{0.7\textwidth}}
\begin{minipage}[t]{\linewidth}
\vspace{0pt}  % This is crucial for top alignment
\begin{forest}
  for tree={
    font=\ttfamily,
    grow'=0,
    child anchor=west,
    parent anchor=south,
    anchor=west,
    calign=first,
    edge path={
      \noexpand\path [draw, \forestoption{edge}]
      (!u.south west) +(7.5pt,0) |- node[fill,inner sep=1.25pt] {} (.child anchor)\forestoption{edge label};
    },
    before typesetting nodes={
      if n=1
        {insert before={[,phantom]}}
        {}
    },
    fit=band,
    before computing xy={l=15pt},
  }
[\underline{/}
  [\underline{home}
    [\underline{alice}
      [Dockerfile]
      [pyproject.toml]
      [\underline{app}
        [check.py]
      ]
      [\underline{data}
        [input.txt]
        [config.txt]
      ]
    ]
  ]
]
\end{forest}
\end{minipage}
&
\begin{minipage}[t]{\linewidth}
\vspace{0pt}  % This is crucial for top alignment

\underline{\textbf{Dockerfile}}
\begin{verbatim}
FROM astral/uv:python3.13-bookworm
WORKDIR /app
COPY pyproject.toml .

RUN uv venv
RUN uv sync

COPY app/check.py .

ENV VAR1="Value abc"

CMD ["uv", "run", "python", "check.py"]
\end{verbatim}

\vspace{10pt}

\underline{\textbf{check.py}}
\begin{verbatim}
import os

if __name__ == '__main__':

    var1 = os.environ["VAR1"]
    print(f"VAR1: {var1}")

    # START SPACE
    var2 = os.environ["VAR2"]
    print(f"VAR2: {var2}")
    # END SPACE
\end{verbatim}

\end{minipage}
\end{tabular} \\
\hline
\end{tabular}
\end{table}

\newpage

\begin{tabularx}{\textwidth}{l|X}
    \textbf{Quiz 2B} &   \textbf{Name: } \\
    \hline 
    \end{tabularx}


\begin{enumerate}

\item We run the following commands from the \texttt{/home/alice} directory:
\begin{verbatim}
docker build . -t quiz2
docker run -e VAR2="RunValue" quiz2
\end{verbatim}

What will be printed to the screen (by the python command) when these commands execute? Write the exact output.

\vspace{3cm}

\item Which (\texttt{VAR1} or \texttt{VAR2}) changes only when we build the container? 
\vspace{3cm}

\item The lines labeled ``\# START SPACE" and ``\# END SPACE" in \texttt{check.py} print the environment variables. Rewrite these lines so that if \texttt{VAR2} is not set, it prints ``VAR2 is not set".

\vspace{5cm}

\item We want to copy \texttt{input.txt} from the \texttt{data} directory into the container at build time. Add a line to the Dockerfile that will copy this file to \texttt{/app/input.txt} inside the container. Use a relative path and specify \underline{where} in the Dockerfile this line should be added.

\vspace{4cm}

\item After the container is built using the Dockerfile above, what is the full path where \texttt{check.py} is located inside the container? 

\end{enumerate}


\end{document}

